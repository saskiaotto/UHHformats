% This is an English UHH LaTeX  template for a report or student assignment that is
% built on the  'ireport' R package.

% -------------------------------
% --- PREAMBLE ---
% -------------------------------

% Options for packages loaded elsewhere {{{
\PassOptionsToPackage{unicode$for(hyperrefoptions)$,$hyperrefoptions$$endfor$}{hyperref}
\PassOptionsToPackage{hyphens}{url}
$if(colorlinks)$
\PassOptionsToPackage{dvipsnames,svgnames*,x11names*}{xcolor}
$endif$
% }}}


% Define document type (here article) {{{
\documentclass[
$if(fontsize)$
$fontsize$,
$endif$
$if(lang)$
$babel-lang$,
$endif$
$for(classoption)$
$classoption$$sep$,
$endfor$
a4paper]{scrartcl}
% }}}


% Coding, Language {{{
$if(german)$
\usepackage[T1]{fontenc}    		% for coding output; allows for umlaut, accents und
                          				% correct hyphenation
\usepackage[ngerman]{babel}     % German so that captions, toc and all is NOT in English
$endif$
% }}}

% Packages {{{
\usepackage{amssymb,amsmath}  	% for math symbols and equations
\usepackage{array}				% extends the array and tabular environments
\usepackage{booktabs}			% for publication quality tables in LaTeX
\usepackage{calc}				% for simple arithmetic in LaTeX commands
\usepackage{eso-pic}			% to add picture commands (or backgrounds) to every page.
\usepackage{fancyhdr}			% for constructing headers and footers
\usepackage{fontspec}			% allows loading of OpenType fonts in a LATEX document
\usepackage{hyperref}			% to handle cross-referencing commands in LaTeX
\usepackage{lastpage}			% allows reference to last page
\usepackage{longtable}			% handles multipage tables
\usepackage{moreverb}			% extends the verbatim package
\usepackage{multirow}			% creates tabular cells spanning multiple rows
\usepackage{natbib}				% flexible bibliography support
\usepackage{tabularx} 			% defines an environment tabularx, an extension of tabular
\usepackage{tikz}				% tool to create graphic elements in LaTeX
\usepackage{titlesec}			% interface to sectioning commands
\usepackage{url}				% verbatim with URL-sensitive line breaks
\usepackage{xcolor}				% extends LATEX's color facilities
\usepackage{colortbl}			% to add colour to LaTeX tables
\usepackage{enumitem}     % to adjusted itemized and enumerated lists
% }}}


% Define Layout {{{
\usepackage{geometry}			% user interface to customize page layout
 \geometry{
 left=25mm,
 right=25mm,
 top=12mm,
 bottom=20mm,
 includeheadfoot,
 }
% }}}


% Graphics {{{
\usepackage{graphicx}
\graphicspath{ {images/} } % images have to be in the /image subfolder
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% }}}


% Define position of graphics
\usepackage{float} % to place the float at precisely the location in the LaTeX code
\floatplacement{figure}{H}
\floatplacement{table}{H}
% }}}


% Define colors for hyperlinks: {{{
\definecolor{linkcol}{HTML}{013d65} %darkblue (027BCB)
\definecolor{filecol}{HTML}{013d65} %darkred (b70000)
\definecolor{urlcol}{HTML}{013d65} %darkred (b70000)
\definecolor{citecol}{HTML}{013d65} %darkblue (027BCB)
% }}}


% Hypersetup {{{
\hypersetup{
colorlinks=true,
linkcolor=$if(linkcolor)$$linkcolor$$else$linkcol$endif$,
filecolor=$if(filecolor)$$filecolor$$else$filecol$endif$,
urlcolor=$if(urlcolor)$$urlcolor$$else$urlcol$endif$,
citecolor=$if(citecolor)$$citecolor$$else$citecol$endif$,
bookmarks=true,
linktocpage=true,
pdfpagemode=UseOutlines,
}
% }}}


\urlstyle{same} % disable monospaced font for URLs


$if(listings)$
\usepackage{listings}				% source code printer for LATEX
\newcommand{\passthrough}[1]{#1}
\lstset{defaultdialect=[5.3]Lua}
\lstset{defaultdialect=[x86masm]Assembler}
$endif$


% Modify lists: {{{
\setlist[itemize]{noitemsep, topsep=1pt}
\setlist[enumerate]{noitemsep, topsep=1pt}
% }}}


% to allow syntax highlighting:
$if(highlighting-macros)$
$highlighting-macros$
$endif$


$if(strikeout)$
\usepackage[normalem]{ulem}
% Avoid problems with \sout in headers with hyperref
\pdfstringdefDisableCommands{\renewcommand{\sout}{}}
$endif$

\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}


$if(numbersections)$
\setcounter{secnumdepth}{$if(secnumdepth)$$secnumdepth$$else$5$endif$}
$else$
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
$endif$




% Name definitions  {{{

% Definition of pagename (so it can be changed by user
\newcommand\pagename{Page}

% }}}


% Text formatting  {{{

% Fonts
\defaultfontfeatures{Mapping = tex-text}
\setmainfont[BoldFont = HelveticaNeue-Bold-02.ttf, ItalicFont = HelveticaNeue-LightItalic-09.ttf, BoldItalicFont = HelveticaNeue-BoldItalic-04.ttf]{HelveticaNeue-Light-08.ttf}
\newfontfamily\headingfont[ItalicFont = HelveticaNeue-BoldItalic-04.ttf]{HelveticaNeue-Bold-02.ttf}

% setting caption text
\usepackage[font=small,labelfont=bf]{caption}

% Paragraph settings
\setlength{\parindent}{0em}           %  indentation at the first line of a paragraph (here set to 0)
\setlength{\parskip}{0.5em}             % paragraph spacing
\renewcommand{\baselinestretch}{1.0}    % line spacing (here single)

% }}}



% Header and footer {{{
\pagestyle{fancy}
 
\thispagestyle{empty}
  
 $if(header_left)$
 \fancyhead[L]{$header_left$}
 $else$
 \fancyhead[L]{}
 $endif$  

 $if(header_right)$
 \fancyhead[R]{$header_right$}
 $else$
 \fancyhead[R]{}
 $endif$  
  
 
% }}}




% change font size of section headers:
\usepackage{titlesec}
\titleformat*{\section}{\Large\bfseries}
\titleformat*{\subsection}{\large\bfseries}
\titleformat*{\subsubsection}{\large\bfseries}


% Adjust abstract section (full width and left aligned)
\renewenvironment{abstract}
 {\small
  \begin{flushleft}
  \bfseries \abstractname\vspace{-0.5em}\vspace{0pt}
  \end{flushleft}
  \list{}{
    \setlength{\leftmargin}{.0cm}
    \setlength{\rightmargin}{\leftmargin}
  }
  \item\relax}
 {\endlist}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% Title

\makeatletter
\renewcommand{\maketitle}{\bgroup\setlength{\parindent}{0pt} 
\begin{flushleft}
  \textbf{\huge\@title}
  
  $if(subtitle)$
  \textbf{\large\@subtitle}
  $endif$

  \large\@author
  \newline
  \@date
\end{flushleft}\egroup
}
\makeatother


\title{$title$}
$if(subtitle)$
\subtitle{$subtitle$}
$endif$
\author{$author$}
\date{$date$}


% Settings specified by user

$for(header-includes)$
  $header-includes$
$endfor$



% Document ----------------

\begin{document}

\maketitle

$if(abstract)$
\begin{abstract}
$abstract$
\end{abstract}
$endif$


$for(include-before)$
  $include-before$
$endfor$


$body$

\clearpage

$if(bibliography)$
  \bibliographystyle{$bibliographystyle$}
  \bibliography{$bibliography$}
$endif$


$for(include-after)$
  $include-after$
$endfor$


\end{document}
